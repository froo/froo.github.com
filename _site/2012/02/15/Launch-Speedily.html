<!DOCTYPE>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/css/bootstrap-responsive.min.css">
	<link rel="stylesheet" type="text/css" href="/css/style.css">
	<link rel="icon" sizes="16x16" href="/favicon.ico" />
	<title>Launch Speedily | Streaming</title>
</head>
<body>
<div class="container">
	<div class="row">
		<div class="span3">
			<div class="sider">
				<h1><a href="/">Streaming</a></h1>
				<p class="muted">Thoughts collection of Chenhui Zhang, who is a mobile product designer and knows a little about Objective-C and Python.</p>
			</div>
		</div>
		<div class="span9">
			<div class="main">
				
				<p>启动，是用户与应用产生交互的第一步，而速度则是这个环节中影响体验非常重要的一个因素。优化应用的启动速度可以从设计和开发两个角度来协力解决。</p>

<h3 id='id1'>了解启动</h3>

<p>应用的启动情境包括：</p>

<p>* 完全冷启动 * 从后台唤醒 * 通过其他应用打开 * 通过本地/Push推送打开</p>

<p><img alt='' src='http://oleb.net/media/xcode-4-2-app-launch-sequence-700px.png' /></p>

<blockquote>
<p>图片来自<a href='http://oleb.net'>Ole Begemann</a></p>
</blockquote>

<p>了解一下一个应用的启动需要过程中发生了什么。从上图中可以看出，整个应用的启动流程主要包括：读取应用配置文件 -&gt; 创建UIApplication实例及其委托 -&gt; 实现<code>application:didFinishLaunchingWithOptions:</code>中的操作 -&gt; 创建并显示首页视图（RootViewController）。</p>

<h3 id='id2'>设计</h3>

<p>在上面的流程中，设计可以参与的是最后一步：首页视图。</p>

<p>不同类型应用的首页视图中的内容需要呈现各不相同</p>

<ul>
<li>将用户最常用的功能作为首页，如微博的Timeline</li>

<li>将首页作为导览页面，对应用中的内容进行推荐，多见于电商类应用、新闻类应用。布局以Appstore.app为基本模板。 * 将首页作为应用视图架构中的起点层级，布局多为纵向表格，或九宫格形式。</li>
</ul>

<p>不管是哪种形式的首页，设计都需要根据产品意图逐个考量在这个视图中放置的元素：</p>

<p>* 是不是都是必要的？ * 是不是可以显示更摘要些的信息？ * 显示优先级是否有差别？是不是都需要启动完成后就立即显示，还是可以异步加载？</p>

<h3 id='id3'>开发</h3>

<p>Instruments: Time Profiler工具可以用来测试启动速度。</p>

<p>在代码实现中，要注意的最重要的一点是一定需要避免阻塞主线程的事件，尤其是网络请求。如果首页中展现的内容不可避免地需要通过这些事件来完成，那么先完成首页视图界面主要框架的载入，同时使用<code>dispatch_async()</code>来进行网络请求或是数据读取，并在完成后更新首页视图。</p>

<p>其次，可以深入的是首页中视图元素的绘制效率。影响绘制性能的主要原因是图层中过多的透明度，和需要对图片进行缩放的操作。</p>
			</div>
		</div>
	</div>
</div>
</body>
<script src="/js/jquery-1.7.2.min.js"></script>
<script src="/js/live.js"></script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-11079342-6']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</html>
